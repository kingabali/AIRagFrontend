<mat-toolbar color="primary">FinOnis GPT Chat</mat-toolbar>

<div class="chat-box">
  <mat-card class="chat-card" *ngFor="let chat of chatHistory">
    <div [ngClass]="chat.sender === 'user' ? 'user-message' : 'ai-message'">
      <strong>{{ chat.sender === 'user' ? 'You' : 'FinOnis' }}:</strong>
      <p [innerHTML]="chat.message"></p>
    </div>
  </mat-card>

  <mat-card *ngIf="isLoading">
    <div class="ai-message">
      <strong>FinOnis:</strong>
      <p [innerHTML]="formattedResponse"></p>
      <mat-progress-bar *ngIf="isLoading" mode="indeterminate" color="accent"></mat-progress-bar>
    </div>
  </mat-card>

  <mat-form-field class="input-area" appearance="outline">
    <input matInput placeholder="Ask FinOnis..." [(ngModel)]="prompt" />
  </mat-form-field>

  <button mat-raised-button color="primary" (click)="sendPrompt()">Send</button>
</div>
